<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Perf Shadows - Yizhou Shan's Home Page</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Perf Shadows";
    var mkdocs_page_input_path = "notes/paper_perf_shadows.md";
    var mkdocs_page_url = "/notes/paper_perf_shadows/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Yizhou Shan's Home Page</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Impl Notes</span>
    <ul class="subnav">
                <li class=" current">
                    
    <a class="current" href="./">Perf Shadows</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#hiding-in-the-performance-shadows">Hiding In The Performance Shadows</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#nanosecond">Nanosecond</a></li>
        
            <li><a class="toctree-l4" href="#runahead">Runahead</a></li>
        
            <li><a class="toctree-l4" href="#microsecond">Microsecond</a></li>
        
            <li><a class="toctree-l4" href="#millisecond">Millisecond</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../cache_coherence/">[Arch] Cache Coherence</a>
                </li>
                <li class="">
                    
    <a class="" href="../rmap/">[Linux] Reverse Mmap (rmap)</a>
                </li>
                <li class="">
                    
    <a class="" href="../trace/">[Linux] Tracing</a>
                </li>
                <li class="">
                    
    <a class="" href="../cgroup-swap/">[Linux] Cgroup and Swap</a>
                </li>
                <li class="">
                    
    <a class="" href="../userfaultfd/">[Linux] Userfaultfd</a>
                </li>
                <li class="">
                    
    <a class="" href="../xperf/">[Linux] User/kern Cross Perf</a>
                </li>
                <li class="">
                    
    <a class="" href="../kvm-basic/">[Linux] KVM</a>
                </li>
                <li class="">
                    
    <a class="" href="../../misc/essential/">[Misc] Essential</a>
                </li>
                <li class="">
                    
    <a class="" href="../../misc/cheatsheet/">[Misc] Cheatsheet</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">LegoOS</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">Log</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/log/TODO/">TODO</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/log/misc/">MISC</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/log/test-note/">Test Script</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/log/log-09-2018/">Sep 2018</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/log/log-08-2018/">Aug 2018</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/log/log-04-2018/">April 2018</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/log/log-03-2018/">March 2018</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/log/log-02-2018/">Feb 2018</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Kernel</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/kconfig/">Kconfig</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/debug/">Debug</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/grub/">GRUB</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/profile/">Profile</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/profile_strace/">Profile strace</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/profile_heatmap/">Profile heatmap</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/profile_points/">Profile points</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/trampoline/">Trampoline</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/pagefault_disable/">Disable pgfault</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/stop_machine/">Stop machine</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/loader/">Program Loader</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/vDSO/">vDSO</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/vfs/">Virtual File System</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/vm/">Process Virtual Memory</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/fpu/">x86 FPU</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/irq/">IRQ</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/net_thpool/">Network Thpool</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Syscall</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/syscall/facts/">Facts</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/kernel/profile_strace/">strace</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/syscall/compat/">compat</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/syscall/msync/">msync()</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/syscall/mremap/">mremap()</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/syscall/fork/">fork()</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/syscall/getrusage/">getrusage()</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/syscall/wait_and_exit/">wait4 and exit()</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Pcache</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/config/">Config</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/sweep/">Sweep</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/tlb/">TLB Coherence</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/pgtable-lock/">PageTable Lock</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/victim/">Victim Cache</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/virtual_cache/">Virtual Cache</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/rmap/">Reverse Mapping</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/evict_and_ref/">Evict and Refcount</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/smp_design/">SMP Design</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/pcache/replication/">Replication</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Driver</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/driver/pci/">PCI</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/driver/ib/">Infiniband</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Paper</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/paper/nmp/">NMP</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/paper/processor_oom/">Processor OOM</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/paper/genz/">Gen-Z</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/paper/replication/">Replication</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../lego/paper/related/">Related</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">FPGA</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../fpga/hls_axi/">HLS: Usage of AXI-Stream</a>
                </li>
                <li class="">
                    
    <a class="" href="../../fpga/hls_axi/">HLS: High-performance AXI-MM</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Yizhou Shan's Home Page</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Impl Notes &raquo;</li>
        
      
    
    <li>Perf Shadows</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="hiding-in-the-performance-shadows">Hiding In The Performance Shadows</h1>
<p><img alt="🚦" class="emojione" src="https://cdn.jsdelivr.net/emojione/assets/svg/1f6a6.svg" title=":vertical_traffic_light:" /></p>
<p>There are shadows under the sun.
There are shadows in your life.
There are shadows in your computer.</p>
<h3 id="nanosecond">Nanosecond</h3>
<h2 id="runahead">Runahead</h2>
<p>“In runahead, once the processor stalls, it uses the instruction window to continue to fetch and execute operations. The goal of runahead is to generate new cache misses, thereby turning subsequent demand requests into cache hits instead of cache misses.”</p>
<p>Papers
- Improving Data Cache Performance by Pre-executing Instructions Under a Cache Miss, ICS’97
- Runahead Execution: An Alternative to Very Large Instruction Windows for Out-of-order Processors, HPCA’03
- Efficient Runahead Execution: Power-Efficient Memory Latency Tolerance, IEEE Micro’06
  - Good timeline graphs show the benefit of Runahead.
- Runahead Threads to Improve SMT Performance, HPCA’08
  - QoS control policy.
- Continuous Runahead: Transparent Hardware Acceleration for Memory Intensive Workloads, MICRO’16
  - A nice read by itself.</p>
<p>In a mechanism and policy separation view:
- Runahead is the mechanism, which includes <code class="codehilite">a)</code> enter runahead, <code class="codehilite">b)</code> execution in runahead context (most important thing is to maintain those INV bits and pseudo-retires), <code class="codehilite">c)</code> exit runahead.
- Prefetch is one of the policy, a major one. It&rsquo;s the side effect of running instructions in the execution phase of runahead mode.
- QoS control is another policy. This means adding specific rules to the execution phase. More specifically: limit the core resource usage of the runahead thread, thus reduce the impact on the co-running HW thread.</p>
<h3 id="helper-threads">Helper Threads</h3>
<p>Fill me in</p>
<h2 id="microsecond">Microsecond</h2>
<p>Fill me in</p>
<h2 id="millisecond">Millisecond</h2>
<p>Fill me in.</p>
<p>&ndash;
Yizhou Shan
Created: Jul 11, 2019
Last Updated: Jul 11, 2019</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../cache_coherence/" class="btn btn-neutral float-right" title="[Arch] Cache Coherence">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../.." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../.." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../cache_coherence/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
