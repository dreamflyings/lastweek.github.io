



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="http://lastweek.io/fpga/vivado/">
      
      
        <meta name="author" content="Yizhou Shan">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.6.2">
    
    
      
        <title>Vivado Practice - Yizhou Shan's Home Page</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.9b572555.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=:300,400,400i,700|Courier">
        <style>body,input{font-family:"","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Courier","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#vivado-practice" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://lastweek.io" title="Yizhou Shan's Home Page" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Yizhou Shan's Home Page
              </span>
              <span class="md-header-nav__topic">
                Vivado Practice
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    Yizhou Shan's Home Page
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Notes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/cache_coherence/" title="Cache Coherence" class="md-nav__link">
      Cache Coherence
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/qemu_kvm/" title="Virtualization" class="md-nav__link">
      Virtualization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/source_code/" title="Codes" class="md-nav__link">
      Codes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/benchmark/" title="Benchmarks" class="md-nav__link">
      Benchmarks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/paper_perf_shadows/" title="Perf Shadows" class="md-nav__link">
      Perf Shadows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../misc/cheatsheet/" title="Cheatsheet" class="md-nav__link">
      Cheatsheet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/linux-articles/" title="Linux Articles" class="md-nav__link">
      Linux Articles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/proc/" title="Linux Special Files" class="md-nav__link">
      Linux Special Files
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/rmap/" title="Linux Reverse Mmap (rmap)" class="md-nav__link">
      Linux Reverse Mmap (rmap)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/trace/" title="Linux Trace/Profile" class="md-nav__link">
      Linux Trace/Profile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/cgroup-swap/" title="Linux Cgroup and Swap" class="md-nav__link">
      Linux Cgroup and Swap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/userfaultfd/" title="Linux Userfaultfd" class="md-nav__link">
      Linux Userfaultfd
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/xperf/" title="Linux User/kern Cross Perf" class="md-nav__link">
      Linux User/kern Cross Perf
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/kvm-basic/" title="Linux KVM" class="md-nav__link">
      Linux KVM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../misc/essential/" title="Essential" class="md-nav__link">
      Essential
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      FPGA
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        FPGA
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../notes/paper_fpga/" title="Papers" class="md-nav__link">
      Papers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../bitstream/" title="Bitstream Explained" class="md-nav__link">
      Bitstream Explained
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Vivado Practice
      </label>
    
    <a href="./" title="Vivado Practice" class="md-nav__link md-nav__link--active">
      Vivado Practice
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cheatsheet" title="Cheatsheet" class="md-nav__link">
    Cheatsheet
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#partition-pins" title="Partition Pins" class="md-nav__link">
    Partition Pins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pblocks" title="Pblocks" class="md-nav__link">
    Pblocks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#semantic-of-exclude_placement" title="Semantic of EXCLUDE_PLACEMENT" class="md-nav__link">
    Semantic of EXCLUDE_PLACEMENT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semantic-of-contain_routing" title="Semantic of CONTAIN_ROUTING" class="md-nav__link">
    Semantic of CONTAIN_ROUTING
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-rm-and-lock-down-static" title="Clear RM and Lock Down Static" class="md-nav__link">
    Clear RM and Lock Down Static
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing" title="Routing" class="md-nav__link">
    Routing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-the-routing-of-a-net" title="Get the routing of a net" class="md-nav__link">
    Get the routing of a net
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lock-the-routing-of-a-net" title="Lock the routing of a net" class="md-nav__link">
    Lock the routing of a net
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-routing" title="Manual routing" class="md-nav__link">
    Manual routing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read-the-docs" title="Read-the-docs" class="md-nav__link">
    Read-the-docs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-ips" title="Some IPs" class="md-nav__link">
    Some IPs
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../pr/" title="Partial Reconfiguration Explained" class="md-nav__link">
      Partial Reconfiguration Explained
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../hls_axi/" title="Efficient AXI-MM" class="md-nav__link">
      Efficient AXI-MM
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      LegoOS
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        LegoOS
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1">
    
    <label class="md-nav__link" for="nav-4-1">
      Kernel
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        Kernel
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/kconfig/" title="Kconfig" class="md-nav__link">
      Kconfig
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/debug/" title="Debug" class="md-nav__link">
      Debug
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/grub/" title="GRUB" class="md-nav__link">
      GRUB
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/profile/" title="Profile" class="md-nav__link">
      Profile
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/profile_strace/" title="Profile strace" class="md-nav__link">
      Profile strace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/profile_heatmap/" title="Profile heatmap" class="md-nav__link">
      Profile heatmap
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/profile_points/" title="Profile points" class="md-nav__link">
      Profile points
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/trampoline/" title="Trampoline" class="md-nav__link">
      Trampoline
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/pagefault_disable/" title="Disable pgfault" class="md-nav__link">
      Disable pgfault
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/stop_machine/" title="Stop machine" class="md-nav__link">
      Stop machine
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/loader/" title="Program Loader" class="md-nav__link">
      Program Loader
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/vDSO/" title="vDSO" class="md-nav__link">
      vDSO
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/vfs/" title="Virtual File System" class="md-nav__link">
      Virtual File System
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/vm/" title="Process Virtual Memory" class="md-nav__link">
      Process Virtual Memory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/fpu/" title="x86 FPU" class="md-nav__link">
      x86 FPU
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/irq/" title="IRQ" class="md-nav__link">
      IRQ
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/net_thpool/" title="Network Thpool" class="md-nav__link">
      Network Thpool
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2">
    
    <label class="md-nav__link" for="nav-4-2">
      Syscall
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Syscall
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/syscall/facts/" title="Facts" class="md-nav__link">
      Facts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/kernel/profile_strace/" title="strace" class="md-nav__link">
      strace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/syscall/compat/" title="compat" class="md-nav__link">
      compat
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/syscall/msync/" title="msync()" class="md-nav__link">
      msync()
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/syscall/mremap/" title="mremap()" class="md-nav__link">
      mremap()
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/syscall/fork/" title="fork()" class="md-nav__link">
      fork()
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/syscall/getrusage/" title="getrusage()" class="md-nav__link">
      getrusage()
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/syscall/wait_and_exit/" title="wait4 and exit()" class="md-nav__link">
      wait4 and exit()
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Pcache
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Pcache
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/config/" title="Config" class="md-nav__link">
      Config
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/sweep/" title="Sweep" class="md-nav__link">
      Sweep
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/tlb/" title="TLB Coherence" class="md-nav__link">
      TLB Coherence
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/pgtable-lock/" title="PageTable Lock" class="md-nav__link">
      PageTable Lock
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/victim/" title="Victim Cache" class="md-nav__link">
      Victim Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/virtual_cache/" title="Virtual Cache" class="md-nav__link">
      Virtual Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/rmap/" title="Reverse Mapping" class="md-nav__link">
      Reverse Mapping
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/evict_and_ref/" title="Evict and Refcount" class="md-nav__link">
      Evict and Refcount
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/smp_design/" title="SMP Design" class="md-nav__link">
      SMP Design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/pcache/replication/" title="Replication" class="md-nav__link">
      Replication
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Driver
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Driver
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/driver/pci/" title="PCI" class="md-nav__link">
      PCI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/driver/ib/" title="Infiniband" class="md-nav__link">
      Infiniband
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Paper
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Paper
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/paper/nmp/" title="NMP" class="md-nav__link">
      NMP
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/paper/processor_oom/" title="Processor OOM" class="md-nav__link">
      Processor OOM
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/paper/genz/" title="Gen-Z" class="md-nav__link">
      Gen-Z
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/paper/replication/" title="Replication" class="md-nav__link">
      Replication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../lego/paper/related/" title="Related" class="md-nav__link">
      Related
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cheatsheet" title="Cheatsheet" class="md-nav__link">
    Cheatsheet
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#partition-pins" title="Partition Pins" class="md-nav__link">
    Partition Pins
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pblocks" title="Pblocks" class="md-nav__link">
    Pblocks
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#semantic-of-exclude_placement" title="Semantic of EXCLUDE_PLACEMENT" class="md-nav__link">
    Semantic of EXCLUDE_PLACEMENT
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semantic-of-contain_routing" title="Semantic of CONTAIN_ROUTING" class="md-nav__link">
    Semantic of CONTAIN_ROUTING
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clear-rm-and-lock-down-static" title="Clear RM and Lock Down Static" class="md-nav__link">
    Clear RM and Lock Down Static
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#routing" title="Routing" class="md-nav__link">
    Routing
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#get-the-routing-of-a-net" title="Get the routing of a net" class="md-nav__link">
    Get the routing of a net
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lock-the-routing-of-a-net" title="Lock the routing of a net" class="md-nav__link">
    Lock the routing of a net
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-routing" title="Manual routing" class="md-nav__link">
    Manual routing
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#read-the-docs" title="Read-the-docs" class="md-nav__link">
    Read-the-docs
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#some-ips" title="Some IPs" class="md-nav__link">
    Some IPs
  </a>
  
</li>
      
      
      
      
      
        <li class="md-nav__item">
          <a href="#__comments" title="Comments" class="md-nav__link md-nav__link--active">
            Comments
          </a>
        </li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="vivado-practice">Vivado Practice<a class="headerlink" href="#vivado-practice" title="Permanent link">&para;</a></h1>
<p><img alt="🐲" class="emojione" src="https://cdn.jsdelivr.net/emojione/assets/svg/1f432.svg" title=":dragon_face:" /></p>
<details class="note"><summary>Version History</summary><table><thead><tr><th align="left">Date</th><th>Description</th></tr></thead><tbody><tr><td align="left">Nov 5, 2019</td><td>More stuff</td></tr><tr><td align="left">Nov 4, 2019</td><td>Add UG903</td></tr><tr><td align="left">Oct 31, 2019</td><td>Happy Halloween</td></tr><tr><td align="left">Sep 20, 2019</td><td>Created</td></tr></tbody></table></details><hr />
<h2 id="cheatsheet">Cheatsheet<a class="headerlink" href="#cheatsheet" title="Permanent link">&para;</a></h2>
<h3 id="partition-pins">Partition Pins<a class="headerlink" href="#partition-pins" title="Permanent link">&para;</a></h3>
<p>The partition pins are inserted by Vivado at the boundary of a PR region.
<code class="codehilite">PartPin</code> is short for Partition Pins.
<code class="codehilite">PPLOC</code> is short for Partpin LOC.</p>
<p>Get the list of partition pins:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nv">get_pplocs</span> <span class="o">-</span>pins <span class="k">[</span><span class="nv">get_pins</span> <span class="o">-</span>hier <span class="o">*</span><span class="k">]</span>
</pre></div>
</td></tr></table></p>
<p>Partition pin (seems) map to a NODE:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="o">%</span> <span class="nv">report_property</span> <span class="k">[</span><span class="nv">get_pplocs</span> <span class="o">-</span>pins <span class="k">[</span><span class="nv">get_pins</span> XXX<span class="k">]]</span>
<span class="o">%</span> <span class="nv">report_property</span> <span class="k">[</span><span class="nv">get_pplocs</span> <span class="o">-</span>pins <span class="k">[</span><span class="nv">get_pins</span> inst_count<span class="o">/</span>count_out<span class="k">[</span><span class="nv">0</span><span class="k">]]]</span>

<span class="nv">INFO</span><span class="o">:</span> <span class="k">[</span><span class="nv">Vivado</span> <span class="mi">12</span><span class="o">-</span><span class="mi">4841</span><span class="k">]</span> Found PartPin: INT_X17Y790<span class="o">/</span>NN1_E_BEG3
<span class="nv">Property</span>           Type    Read-only  Value
<span class="nv">BASE_CLOCK_REGION</span>  string  true       X0Y13
<span class="nv">CLASS</span>              string  true       node
</pre></div>
</td></tr></table></p>
<hr />
<h3 id="pblocks">Pblocks<a class="headerlink" href="#pblocks" title="Permanent link">&para;</a></h3>
<h4 id="semantic-of-exclude_placement">Semantic of <code class="codehilite">EXCLUDE_PLACEMENT</code><a class="headerlink" href="#semantic-of-exclude_placement" title="Permanent link">&para;</a></h4>
<p>The document describe this as: Pblock property that prevents the <em>placement</em> of any logic not
belonging to the Pblock inside the defined Pblock range.</p>
<p>During my own simple experiment, I found that even Vivado will not place other logics
into the Pblock, <em>the routes of static region</em> can still go across pblock.</p>
<h4 id="semantic-of-contain_routing">Semantic of <code class="codehilite">CONTAIN_ROUTING</code><a class="headerlink" href="#semantic-of-contain_routing" title="Permanent link">&para;</a></h4>
<p>References: UG909 and UG905.</p>
<p>The contained routing requirement of RP Pblocks for UltraScale and UltraScale+ devices has
been relaxed to allow for improved routing and timing results. Instead of routing being
confined strictly to the resources owned by the Pblock, the routing footprint is expanded.</p>
<p>Note that this option is enabled by default. When this option is enabled,
1) not all interface ports receive a partition pin,
2) the RP will use routing resources outside its confined area. This is annonying in some way.</p>
<p>If this option is disabled, the implications are:
1) each interface port (per bit) receivces a partition pin,
2) RP will only resources confined to its pblocks,
3) the generated PR bitstream will be smaller,
4) <code class="codehilite">hd_visual/</code> will not be generated.</p>
<p>However, this option does not prevent routings from the static region from crossing RPs.</p>
<p>This command is useful when you want to do some hacking about Partition Pins.
Actually, you can also do this via GUI.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nv">set_param</span> hd.routingContainmentAreaExpansion false
</pre></div>
</td></tr></table>

<p>But you wouldn&rsquo;t believe that: <strong>Static routing is still allowed to use resources inside of the Pblock.</strong>
The implication is also obvious: all PR bitstreams and even blank bitstream will also have the static
routing, if their targeted Pblocks happen to have static routing in the first place. This is also why
we will need the static bitstream as the base to do PR bitstream generation.</p>
<hr />
<h3 id="clear-rm-and-lock-down-static">Clear RM and Lock Down Static<a class="headerlink" href="#clear-rm-and-lock-down-static" title="Permanent link">&para;</a></h3>
<p>These commands clear out the Reconfigurable Module logics from the whole design
and then lock down the static region and static routing. (Reference: UG947)</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nv">update_design</span> <span class="o">-</span>cell XXX <span class="o">-</span>black_box

<span class="nv">lock_design</span> <span class="o">-</span>level routing
</pre></div>
</td></tr></table>

<hr />
<h3 id="routing">Routing<a class="headerlink" href="#routing" title="Permanent link">&para;</a></h3>
<h4 id="get-the-routing-of-a-net">Get the routing of a net<a class="headerlink" href="#get-the-routing-of-a-net" title="Permanent link">&para;</a></h4>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="k">set</span> net <span class="k">[</span><span class="nv">get_nets</span> XXX<span class="k">]</span>
<span class="nv">get_property</span> ROUTE <span class="nv">$net</span>
</pre></div>
</td></tr></table>

<h4 id="lock-the-routing-of-a-net">Lock the routing of a net<a class="headerlink" href="#lock-the-routing-of-a-net" title="Permanent link">&para;</a></h4>
<p>We need to lock both the net and the connected cells. Reference is UG903.</p>
<p>Following commands lock a route of a net. This net is already routed.
You could run one by one.
After execution, the route will become dashed (means locked).
Replace the net name with your interested one.
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nb">set</span> net <span class="o">[</span>get_nets inst_count/count_out<span class="o">[</span><span class="m">0</span><span class="o">]]</span>
get_property ROUTE <span class="nv">$net</span>
set_property FIXED_ROUTE <span class="o">[</span>get_property ROUTE <span class="nv">$net</span><span class="o">]</span> <span class="nv">$net</span>

set_property is_bel_fixed <span class="m">1</span> <span class="o">[</span>get_cells XXX<span class="o">]</span>
set_property is_loc_fixed <span class="m">1</span> <span class="o">[</span>get_cells XXX<span class="o">]</span>
</pre></div>
</td></tr></table></p>
<h4 id="manual-routing">Manual routing<a class="headerlink" href="#manual-routing" title="Permanent link">&para;</a></h4>
<p>A great GUI-based manual routing tutorial can be found at <a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2019_1/ug986-vivado-tutorial-implementation.pdf">UG986 Lab 3</a>. The last step of manual routing, of course is to lock down the LOC and set <code class="codehilite">FIXED_ROUTE</code>.</p>
<p>But how can we manually route an unrouted net?
The difficulty is that we need to manually find out all the connection nodes/tiles etc..
This applies to LOC placement as well.</p>
<hr />
<h2 id="read-the-docs">Read-the-docs<a class="headerlink" href="#read-the-docs" title="Permanent link">&para;</a></h2>
<p>Basic</p>
<ul>
<li><a href="https://www.xilinx.com/content/dam/xilinx/support/documentation/sw_manuals/xilinx2019_1/ug912-vivado-properties.pdf&lt;Paste&gt;">UG912 Vivado Properties Reference Guide</a><ul>
<li>Excellent resource on explaining cell, net, pin, port, and so on.</li>
<li>Differentiate <code class="codehilite">Netlist Objects</code> and <code class="codehilite">Device Resource Objects</code>.<ul>
<li><code class="codehilite">Netlist Objects</code><ul>
<li><code class="codehilite">pin</code>: A pin is a point of logical connectivity on a primitive or
    hierarchical cell. A pin allows the contents of a cell to be abstracted away,
    and the logic simplified for ease-of-use. A pin is attached to a cell and can be connected to pins on other cells by a net.
    <code class="codehilite"><span class="n">get_pins</span> <span class="o">-</span><span class="n">of</span> <span class="p">[</span><span class="n">get_cells</span> <span class="n">XXX</span><span class="p">]</span></code>. <code class="codehilite">get_pins XXX</code></li>
<li><code class="codehilite">port</code>: A port is a special type of hierarchical pin, providing an external connection point at the
    top-level of a hierarchical design, or an internal connection point in a hierarchical cell or
    block module to connect the internal logic to the pins on the hierarchical cell. </li>
<li><code class="codehilite">cell</code>: A cell is an instance of a netlist logic object, which can either be a leaf-cell or a hierarchical
    cell. A leaf-cell is a primitive, or a primitive macro, with no further logic detail in the netlist.
    A hierarchical cell is a module or block that contains one or more additional levels of logic,
    and eventually concludes at leaf-cells. .. cells have PINs which are connected to NETs to define the external
    netlist&hellip; The CELL can be placed onto a BEL object in the case of basic logic such as flops, LUTs, and
    MUXes; or can be placed onto a SITE object in the case of larger logic cells such as BRAMs and DSPs.</li>
<li><code class="codehilite">net</code>: A net is a set of interconnected pins, ports, and wires. Every wire has a net name, which
    identifies it. Two or more wires can have the same net name. All wires sharing a common net
    name are part of a single NET, and all pins or ports connected to these wires are electrically connected. ..
    In the design netlist, a NET can be connected to the PIN of a CELL, or to a PORT. ..
    As the design is mapped onto the target Xilinx FPGA, the NET is mapped to routing
    resources such as WIREs, NODEs, and PIPs on the device, and is connected to BELs through
    BEL_PINs, and to SITEs through SITE_PINs. </li>
<li><code class="codehilite">pblock</code>: A Pblock is a collection of cells, and one or more rectangular areas or regions that specify
    the device resources contained by the Pblock. Pblocks are used during floorplanning
    placement to group related logic and assign it to a region of the target device.<ul>
<li><details class="example"><summary>Example</summary>
create_pblock Pblock_usbEngine<br />
add_cells_to_pblock [get_pblocks Pblock_usbEngine] [get_cells -quiet [listusbEngine1]]<br />
resize_pblock [get_pblocks Pblock_usbEngine] -add {SLICE_X8Y105:SLICE_X23Y149}<br />
resize_pblock [get_pblocks Pblock_usbEngine] -add {DSP48_X0Y42:DSP48_X1Y59}<br />
resize_pblock [get_pblocks Pblock_usbEngine] -add {RAMB18_X0Y42:RAMB18_X1Y59}<br />
resize_pblock [get_pblocks Pblock_usbEngine] -add {RAMB36_X0Y21:RAMB36_X1Y29}</details></li>
</ul>
</li>
</ul>
</li>
<li><code class="codehilite">Device Resource Objects</code><ul>
<li><code class="codehilite">BEL</code>: 1) leaf-level cells from the netlist design can be mapped onto bels on the target part
    2) Bels are grouped in sites. 3) Each bel has bel_pins that map to pins on the cells.
    4) <code class="codehilite"><span class="n">get_bels</span> <span class="o">-</span><span class="n">of</span> <span class="p">[</span><span class="n">get_cells</span> <span class="n">XX</span><span class="p">]</span></code>, <code class="codehilite"><span class="n">get_bels</span> <span class="o">-</span><span class="n">of</span> <span class="p">[</span><span class="n">get_nets</span> <span class="n">XX</span><span class="p">]</span></code>, and so on.</li>
<li><code class="codehilite">BEL_PIN</code>: 1) a pin or connection point on a BEL object. 2) BEL_PIN is a device object,
    associated with netlist objects such as the PIN on a CELL, which is the connection point for the NET.
    3) <code class="codehilite"><span class="n">get_bel_pins</span> <span class="o">-</span><span class="n">of_objects</span> <span class="p">[</span><span class="n">get_pins</span> <span class="o">-</span><span class="n">of</span> <span class="p">[</span><span class="n">get_cells</span> <span class="n">XXX</span><span class="p">]]</span></code></li>
<li><code class="codehilite">TILE</code></li>
<li><code class="codehilite">SITE</code></li>
<li><code class="codehilite">NODE</code></li>
<li><code class="codehilite">WIRE</code></li>
<li><code class="codehilite">PIP</code></li>
</ul>
</li>
</ul>
</li>
<li><code class="codehilite">CONTAIN_ROUTING</code>: The <code class="codehilite">CONTAIN_ROUTING</code> property restricts the routing of signals contained within a Pblock
to use routing resources within the area defined by the Pblock. This prevents signals inside
the Pblock from being routed outside the Pblock, and increases the reusability of the design.<ul>
<li>This is useful when you are trying to do advanced PR hacks.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2018_3/ug894-vivado-tcl-scripting.pdf">UG835 Vivado TCL Reference Guide</a><ul>
<li>aka. Vivado TCL Man Page. Read this with the above UG912.</li>
</ul>
</li>
<li><a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2019_1/ug894-vivado-tcl-scripting.pdf">UG894 Vivado Using TCL scripting</a><ul>
<li>Get you started with Vivado TCL</li>
</ul>
</li>
<li>
<p><a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2018_3/ug903-vivado-using-constraints.pdf">UG903 Using Constraints</a></p>
<ul>
<li>About Xilinx XDC files. You will need to understand UG912 first.</li>
<li>Physical Constraints<ul>
<li><code class="codehilite">DONT_TOUCH</code>. Prevent netlist optimizations. 1) prevent a net from being optimized away. 2) Prevent merging of manually replicated logic.</li>
<li>Placement constraints</li>
<li>Routing constraints</li>
</ul>
</li>
</ul>
</li>
<li>
<p><a href="http://www.beedub.com/book/tkbook.pdf">Book: Practical Programming in Tcl and Tk</a></p>
</li>
</ul>
<p>Partial Reconfiguration Related</p>
<ul>
<li><a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2019_1/ug909-vivado-partial-reconfiguration.pdf">UG909 Partial Reconfiguration</a><ul>
<li><code class="codehilite">Partition Pins</code><ul>
<li>Interface points called partition pins are automatically created within the Pblock ranges
defined for the Reconfigurable Partition. These virtual I/O are established within
interconnect tiles as the anchor points that remain consistent from one module to the next.</li>
<li>In UltraScale or UltraScale+ designs, <strong>not all interface ports receive a partition pin</strong>. With the
<strong>routing expansion</strong> feature, as explained in Expansion of <code class="codehilite">CONTAIN_ROUTING</code> Area, some
interface nets are completely contained within the expanded region. When this happens, no
partition pin is inserted; the entire net, including the source and all loads, is contained
within the area captured by the partial bit file. Rather than pick an unnecessary
intermediate point for the route, the entire net is rerouted, giving the Vivado tools the
flexibility to pick an optimal solution.</li>
<li><details class="exmaple"><summary>Exmaple</summary>
set_property HD.PARTPIN_LOCS INT_R_X4Y153 [get_ports <port_name>]<br />
set_property HD.PARTPIN_RANGE SLICE_X4Y153:SLICE_X5Y157 [get_ports <port_name>]<br />
set_property HD.PARTPIN_RANGE {SLICE_Xx0Yx0:SLICE_Xx1Yy1 SLICE_XxNYyN:SLICE_XxMYyM} [get_pins <rp_cell_name>/*]<Paste></details></li>
<li>These pins can be manually relocated and locked.</li>
</ul>
</li>
</ul>
</li>
<li><a href="https://www.xilinx.com/support/documentation/sw_manuals/xilinx2019_1/ug905-vivado-hierarchical-design.pdf">UG905 Hierarchical Design</a><ul>
<li>Add the <code class="codehilite">CONTAIN_ROUTING</code> property to all OOC Pblocks. Without this property,
<code class="codehilite">lock_design</code> cannot lock the routing of an imported module because it cannot be
guaranteed that there are no routing conflicts</li>
</ul>
</li>
</ul>
<hr />
<h2 id="some-ips">Some IPs<a class="headerlink" href="#some-ips" title="Permanent link">&para;</a></h2>
<ul>
<li>UG947 has the sample code for the PR Controller IP<ul>
<li>It does not support simulation. Thus we can not probe any ICAP related signals.</li>
</ul>
</li>
<li>Ultrascale+ SEM does not have any useful ICAP usage signals in Simulation.</li>
<li>xapp1230 has some TCL scripts to perform JTAG readback.</li>
</ul>
                
                  
                
              
              
                
                  


  <h2 id="__comments">Comments</h2>
  <div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = "http://lastweek.io/fpga/vivado/";
      this.page.identifier =
        "/fpga/vivado/";
    };
    (function() {
      var d = document, s = d.createElement("script");
      s.src = "//lastweek-io.disqus.com/embed.js";
      s.setAttribute("data-timestamp", +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>

                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../bitstream/" title="Bitstream Explained" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Bitstream Explained
              </span>
            </div>
          </a>
        
        
          <a href="../pr/" title="Partial Reconfiguration Explained" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Partial Reconfiguration Explained
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://github.com/lastweek" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.abd7b172.js"></script>
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-143772066-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>